---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import PromoSection from '../components/PromoSection.astro';
import Hero from '../components/Hero.astro';
import Avantages from '../components/Avantages.astro';
import Cours from '../components/Cours.astro';
import KidsSection from '../components/KidsSection.astro';
import Temoignages from '../components/Temoignages.astro';
import SocialProof from '../components/SocialProof.astro';
import RandomBlogPosts from '../components/RandomBlogPosts.astro';
import Resultats from '../components/Resultats.astro';
import Footer from '../components/Footer.astro';

// Construction de l'URL canonique
const canonicalURL = new URL(Astro.url.pathname, 'https://musique-facile.fr').toString();

// M√©tadonn√©es pour Open Graph
const title = "Musique Facile - Apprenez la musique facilement";
const description = "D√©couvrez nos formations en ligne pour apprendre la guitare, le piano, l'ukul√©l√© et le solf√®ge. Plus de 80 000 √©l√®ves form√©s avec une note moyenne de 4.7/5.";
const ogImage = "https://musique-facile.fr/images/og-image.jpg";

// Construction des donn√©es structur√©es
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Musique Facile",
  "url": "https://musique-facile.fr",
  "logo": "https://musique-facile.fr/logo.jpg",
  "sameAs": [
    "https://www.youtube.com/@Musique-Facile",
    "https://www.tiktok.com/@musique_facile",
    "https://instagram.com/musique_facile",
    "https://facebook.com/musiquefacile"
  ],
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "FR"
  }
};

const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Musique Facile",
  "url": "https://musique-facile.fr",
  "description": "Formations en ligne pour apprendre la guitare, le piano, l'ukul√©l√© et le solf√®ge",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://musique-facile.fr/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "name": "Accueil",
    "item": "https://musique-facile.fr"
  }]
};
---

<Layout title={title}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Security Headers -->
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImage} />

    <!-- Schema.org -->
    <script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  </head>
  
  <Header />
  <!-- <PromoSection /> -->
  <Hero />
  <Avantages />
  <Cours />
  <KidsSection />
  <Temoignages />
  <SocialProof />
  <RandomBlogPosts />
  <Resultats />

  <section class="course-buttons">
    <div class="container">
      <h2 class="section-title">Alors, pr√™t(e) √† rejoindre l'aventure ?</h2>
      <div class="buttons-grid">
        <a href="/cours/cours-de-guitare" class="course-button theme-guitar">
          <div class="button-background" style="background-image: url('/images/cours/hero-guitare.jpg')"></div>
          <div class="button-content">
            <span class="button-icon">üé∏</span>
            <div class="button-text-wrapper">
              <span class="button-title">Cours de Guitare</span>
              <span class="button-description">Apprenez la guitare pas √† pas</span>
            </div>
            <span class="button-arrow">‚Üí</span>
          </div>
        </a>

        <a href="/cours/cours-de-piano" class="course-button theme-piano">
          <div class="button-background" style="background-image: url('/images/cours/hero-piano.jpg')"></div>
          <div class="button-content">
            <span class="button-icon">üéπ</span>
            <div class="button-text-wrapper">
              <span class="button-title">Cours de Piano</span>
              <span class="button-description">D√©couvrez le piano facilement</span>
            </div>
            <span class="button-arrow">‚Üí</span>
          </div>
        </a>

        <a href="/cours/cours-de-ukulele" class="course-button theme-ukulele">
          <div class="button-background" style="background-image: url('/images/cours/hero-ukulele.jpg')"></div>
          <div class="button-content">
            <span class="button-icon">üèñÔ∏è</span>
            <div class="button-text-wrapper">
              <span class="button-title">Cours d'Ukul√©l√©</span>
              <span class="button-description">Initiez-vous √† l'ukul√©l√©</span>
            </div>
            <span class="button-arrow">‚Üí</span>
          </div>
        </a>

        <a href="/cours/cours-de-solfege" class="course-button theme-solfege">
          <div class="button-background" style="background-image: url('/images/cours/hero-solfege.jpg')"></div>
          <div class="button-content">
            <span class="button-icon">üéº</span>
            <div class="button-text-wrapper">
              <span class="button-title">Cours de Solf√®ge</span>
              <span class="button-description">Ma√Ætrisez la th√©orie musicale</span>
            </div>
            <span class="button-arrow">‚Üí</span>
          </div>
        </a>
      </div>
    </div>
  </section>

  <Footer />
</Layout>

<style>
  .course-buttons {
    padding: 4rem 0;
    background: var(--bg-light);
  }

  .course-buttons .section-title {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: var(--theme-current);
    background: linear-gradient(135deg, var(--theme-current) 0%, var(--theme-current-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: fadeInUp 0.6s ease forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .buttons-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .course-button {
    position: relative;
    height: 200px;
    border-radius: var(--border-radius);
    overflow: hidden;
    text-decoration: none;
    color: white;
    transition: all 0.3s ease;
  }

  .button-background {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    transition: all 0.5s ease;
  }

  .theme-guitar .button-background {
    background-color: var(--theme-guitar);
  }

  .theme-piano .button-background {
    background-color: var(--theme-piano);
  }

  .theme-ukulele .button-background {
    background-color: var(--theme-ukulele);
  }

  .theme-solfege .button-background {
    background-color: var(--theme-solfege);
  }

  .button-content {
    position: relative;
    z-index: 1;
    height: 100%;
    padding: 1.5rem;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.3),
      rgba(0, 0, 0, 0.8)
    );
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    gap: 1rem;
    transition: all 0.3s ease;
  }

  .button-icon {
    font-size: 2rem;
    background: rgba(255, 255, 255, 0.2);
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    margin-bottom: auto;
  }

  .button-text-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .button-title {
    font-size: 1.3rem;
    font-weight: 600;
  }

  .button-description {
    font-size: 0.9rem;
    opacity: 0.9;
  }

  .button-arrow {
    font-size: 1.2rem;
    transition: transform 0.3s ease;
  }

  .course-button:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
  }

  .course-button:hover .button-background {
    transform: scale(1.1);
  }

  .course-button:hover .button-content {
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.5),
      rgba(0, 0, 0, 0.9)
    );
  }

  .course-button:hover .button-arrow {
    transform: translateX(5px);
  }

  @media (max-width: 1200px) {
    .buttons-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .buttons-grid {
      grid-template-columns: 1fr;
    }

    .course-button {
      height: 160px;
    }

    .button-icon {
      width: 40px;
      height: 40px;
      font-size: 1.5rem;
    }

    .button-title {
      font-size: 1.2rem;
    }
  }
</style>
