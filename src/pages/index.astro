---
/**
 * index.astro
 * Page d'accueil principale de Musique Facile
 *
 * Structure optimis√©e (8 sections):
 * 1. Hero - Accroche principale avec CTA
 * 2. Avantages - 3 b√©n√©fices cl√©s
 * 3. Cours - Grille des 4 instruments
 * 4. Lead Capture - Formulaire email (guide gratuit)
 * 5. T√©moignages - Carousel social proof
 * 6. Pricing - Transparence des prix
 * 7. CTA Final - Dernier appel √† l'action
 * 8. Footer
 */

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';

// Nouveaux composants modernis√©s
import HeroModern from '../components/HeroModern.astro';
import CoursGrid from '../components/CoursGrid.astro';
import TemoignagesModern from '../components/TemoignagesModern.astro';
import LeadCaptureForm from '../components/LeadCaptureForm.astro';
import FooterModern from '../components/FooterModern.astro';

// Composants conserv√©s
import PricingPreview from '../components/PricingPreview.astro';
import StickyCTAMobile from '../components/StickyCTAMobile.astro';

// Construction de l'URL canonique
const canonicalURL = new URL(Astro.url.pathname, 'https://musique-facile.fr').toString();

// M√©tadonn√©es SEO (conserv√©es de l'original)
const title = "Cours de Guitare, Piano, Ukul√©l√© en Ligne ‚Äî M√©thode Fred Fieff√© | Musique Facile";
const description = "Formations en ligne pour apprendre la guitare, le piano, l'ukul√©l√© et le solf√®ge. M√©thode progressive cr√©√©e par Fred Fieff√©, professeur certifi√© avec 15 ans d'exp√©rience. Plus de 80 000 √©l√®ves form√©s, 4.7/5 de note moyenne sur 2 847 avis.";
const keywords = "cours guitare en ligne, apprendre piano, formation ukul√©l√© d√©butant, solf√®ge facile, cours musique en ligne, Fred Fieff√©";
const ogImage = "https://musique-facile.fr/logo.webp";

// Sch√©mas JSON-LD (conserv√©s de l'original)
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "EducationalOrganization",
  "name": "Musique Facile",
  "url": "https://musique-facile.fr",
  "logo": "https://musique-facile.fr/logo.webp",
  "description": "√âcole de musique en ligne sp√©cialis√©e dans l'enseignement de la guitare, du piano, de l'ukul√©l√© et du solf√®ge pour tous niveaux.",
  "foundingDate": "2015",
  "founder": {
    "@type": "Person",
    "name": "Fred Fieff√©",
    "jobTitle": "Professeur de Musique Certifi√©"
  },
  "sameAs": [
    "https://www.youtube.com/@Musique-Facile",
    "https://www.tiktok.com/@musique_facile",
    "https://instagram.com/guitare_et_ukulele_facile/?hl=fr",
    "https://facebook.com/MusiqueFacileFacebook"
  ],
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.7",
    "reviewCount": "2847",
    "bestRating": "5"
  }
};

const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Musique Facile",
  "url": "https://musique-facile.fr",
  "description": "Formations en ligne pour apprendre la guitare, le piano, l'ukul√©l√© et le solf√®ge"
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Combien de temps faut-il pour apprendre la guitare en ligne ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Avec la m√©thode Musique Facile, 92% des √©l√®ves jouent leur premi√®re chanson en 5 jours. En pratiquant 15 minutes par jour, vous ma√Ætriserez les accords de base en 3 semaines."
      }
    },
    {
      "@type": "Question",
      "name": "Les cours sont-ils adapt√©s aux d√©butants complets ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Oui, tous nos cours commencent au niveau z√©ro. Aucune connaissance musicale pr√©alable n'est requise. Les le√ßons sont progressives avec des exercices pratiques."
      }
    },
    {
      "@type": "Question",
      "name": "Quel est le prix des formations ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Nos formations sont disponibles √† l'achat individuel par instrument. Chaque formation donne un acc√®s √† vie avec garantie satisfait ou rembours√© de 15 jours."
      }
    },
    {
      "@type": "Question",
      "name": "Peut-on apprendre la musique √† 40, 50 ou 60 ans ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolument ! La majorit√© de nos √©l√®ves sont des adultes. Notre m√©thode est sp√©cialement con√ßue pour les adultes qui reprennent ou d√©butent la musique. L'√¢ge n'est pas un frein, au contraire : les adultes progressent souvent plus vite car ils sont plus motiv√©s."
      }
    },
    {
      "@type": "Question",
      "name": "Faut-il conna√Ætre le solf√®ge pour commencer ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Non, le solf√®ge n'est pas obligatoire pour d√©buter la guitare, le piano ou l'ukul√©l√©. Nos cours utilisent des tablatures, des diagrammes d'accords et des vid√©os pas-√†-pas. Vous pouvez apprendre le solf√®ge en parall√®le si vous le souhaitez."
      }
    },
    {
      "@type": "Question",
      "name": "Qui est Fred Fieff√©, le formateur ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Fred Fieff√© est musicien professionnel avec 35 ans de pratique et 20 ans d'exp√©rience dans l'enseignement. Il a form√© plus de 80 000 √©l√®ves en ligne via Musique Facile, LinkedIn Learning et Skilleos. Il est √©galement auteur de m√©thodes chez Hal Leonard."
      }
    },
    {
      "@type": "Question",
      "name": "Combien de temps par jour faut-il pratiquer ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "15 minutes par jour suffisent pour progresser r√©guli√®rement. Notre m√©thode est con√ßue pour les adultes actifs avec peu de temps disponible. La r√©gularit√© compte plus que la dur√©e des sessions."
      }
    },
    {
      "@type": "Question",
      "name": "Les cours sont-ils accessibles √† vie ?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Oui, une fois votre formation achet√©e, vous y avez acc√®s √† vie. Vous pouvez revenir sur les le√ßons autant de fois que n√©cessaire, √† votre rythme, sans limite de temps."
      }
    }
  ]
};
---

<Layout
  title={title}
  description={description}
  ogImage={ogImage}
  canonicalUrl={canonicalURL}
  robots="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
>
  <Fragment slot="head">
    <meta name="author" content="Fred Fieff√© - Musique Facile" />
    <script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </Fragment>

  <!-- Header -->
  <Header />

  <!-- 1. Hero Modernis√© -->
  <HeroModern
    title="Apprenez la musique en 15 min par jour"
    subtitle="Rejoignez 80 000 musiciens qui ont transform√© leur passion en r√©alit√© avec notre m√©thode progressive."
    ctaText="D√©couvrir les cours"
    ctaUrl="/cours"
  />

  <!-- 2. Avantages (section l√©g√®re) -->
  <section class="features-section">
    <div class="features-container">
      <div class="feature">
        <div class="feature-icon-wrapper">
          <span class="feature-icon">‚ö°</span>
        </div>
        <div class="feature-content">
          <h3>Jouez en 7 jours</h3>
          <p>92% de nos √©l√®ves jouent leur premi√®re chanson en moins de 5 jours</p>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon-wrapper">
          <span class="feature-icon">üéØ</span>
        </div>
        <div class="feature-content">
          <h3>15 min suffisent</h3>
          <p>M√©thode con√ßue pour les adultes actifs, progressez √† votre rythme</p>
        </div>
      </div>
      <div class="feature">
        <div class="feature-icon-wrapper">
          <span class="feature-icon">üí¨</span>
        </div>
        <div class="feature-content">
          <h3>Support r√©actif</h3>
          <p>R√©ponse garantie sous 24h pour toutes vos questions</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 3. Grille de Cours -->
  <CoursGrid
    title="Choisissez votre instrument"
    subtitle="Des cours structur√©s pour progresser du d√©butant √† l'interm√©diaire."
  />

  <!-- 4. Lead Capture (d√©sactiv√© temporairement)
  <LeadCaptureForm
    title="Votre guide gratuit"
    subtitle="Les 5 accords magiques pour jouer 100 chansons √† la guitare"
    buttonText="Recevoir mon guide"
    theme="dark"
    leadMagnet="5-accords-guitare"
  />
  -->

  <!-- 5. T√©moignages -->
  <TemoignagesModern title="Ce que nos √©l√®ves en disent" />

  <!-- 6. Pricing -->
  <PricingPreview />

  <!-- 7. CTA Final -->
  <section class="final-cta">
    <div class="cta-container">
      <h2>Pr√™t √† commencer votre aventure musicale ?</h2>
      <p>Rejoignez 80 000 musiciens qui ont fait le premier pas</p>
      <div class="cta-buttons">
        <a href="/cours" class="cta-primary">
          Voir tous les cours
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M4 10h12m0 0l-4-4m4 4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <a href="/a-propos" class="cta-secondary">En savoir plus sur Fred</a>
      </div>
    </div>
  </section>

  <!-- 8. Footer -->
  <FooterModern />

  <!-- Sticky CTA Mobile -->
  <StickyCTAMobile />
</Layout>

<style>
  /* Features Section */
  .features-section {
    padding: var(--space-16) var(--space-4);
    background: var(--bg-card);
  }

  .features-container {
    max-width: 1100px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-8);
  }

  @media (min-width: 768px) {
    .features-container {
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-10);
    }
  }

  .feature {
    display: flex;
    gap: var(--space-4);
    align-items: flex-start;
  }

  @media (min-width: 768px) {
    .feature {
      flex-direction: column;
      text-align: center;
      align-items: center;
    }
  }

  .feature-icon-wrapper {
    width: 56px;
    height: 56px;
    background: var(--brand-50);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .feature-icon {
    font-size: 1.75rem;
  }

  .feature-content h3 {
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-1);
  }

  .feature-content p {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
    margin: 0;
  }

  /* Final CTA */
  .final-cta {
    padding: var(--space-20) var(--space-4);
    background: linear-gradient(135deg, var(--brand-600) 0%, var(--brand-700) 100%);
    text-align: center;
  }

  .cta-container {
    max-width: 600px;
    margin: 0 auto;
  }

  .final-cta h2 {
    font-family: var(--font-heading);
    font-size: clamp(1.75rem, 4vw, 2.5rem);
    font-weight: var(--font-bold);
    color: white;
    margin-bottom: var(--space-4);
  }

  .final-cta p {
    font-size: var(--text-lg);
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: var(--space-8);
  }

  .cta-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-4);
    justify-content: center;
  }

  .cta-primary {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4) var(--space-8);
    background: white;
    color: var(--brand-600);
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    text-decoration: none;
    border-radius: var(--radius-lg);
    transition: all 0.3s ease;
  }

  .cta-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }

  .cta-secondary {
    display: inline-flex;
    align-items: center;
    padding: var(--space-4) var(--space-6);
    background: transparent;
    color: white;
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    text-decoration: none;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-lg);
    transition: all 0.3s ease;
  }

  .cta-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
  }

  @media (max-width: 480px) {
    .cta-buttons {
      flex-direction: column;
    }

    .cta-primary,
    .cta-secondary {
      width: 100%;
      justify-content: center;
    }
  }
</style>
